{% comment %}
	Project page boxes display page information for projects that have
	one or more sub-pages. Each sub-page MUST have a `title` and either
	a `original_link` (for pages pointing offsite, like member writings)
	of `permalink` (for on-site pages) attribute, and then can contain
	any combination of the following attributes (including none at all):
	`hero_image`, `author`, `date`, and `description`. For best results,
	all sub-pages associated with a given project (with `display: true`)
	should have the same set of attributes defined.

	This include expects a single parameter:

		`pp`
		An object containing the relevant project page information.
{% endcomment %}

<div id="{{ include.pp.name }}" class="project-page-box-container dib mt5 mh2 mh4-l">
	<a href="{% if include.pp.original_link %}{{ include.pp.original_link }}{% else %}{{ include.pp.permalink }}{% endif %}" class="project-page-box ba relative">

		{% comment %}
			Hero image. Displayed square, if present.

			We look up the background color from the associated project.
		{% endcomment %}
		{% if include.pp.hero_image %}
			{% assign project_data = site.projects | where: "name", include.pp.project | first %}
			<div class="hero h5 bb" style="background: rgb({{ project_data.accent_color }}) url('{{ include.pp.hero_image }}') center center; background-size: cover;"></div>
		{% endif %}

		<div class="page-info mh4 mt1 mb3">
			<h2 class="pseudo-link">{{ include.pp.title }}</h2>

			{% comment %}
				Project page date.
			{% endcomment %}
			{% if include.pp.date %}
				<time class="f6 ttu tracked-tight">
					{{ include.pp.date | date_to_long_string: "ordinal", "US" }}
				</time>
			{% endif %}

			{% comment %}
				Project page author. Since the `member-list.html`
				include expects an array but `include.pp.author` is a
				string, we need to use `split` (on a character not
				present in `include.pp.author`) to turn it into a
				single-element array.
			{% endcomment %}
			{% if include.pp.author %}
				{% assign author = include.pp.author | split: " " %}
				<p class="project-page-author f6 ttu tracked-tight">{% include member-list.html member_list=author link_members=false %}</p>
			{% endif %}

			{% comment %}
				Project page description.
			{% endcomment %}
			{% if include.pp.description %}
				<p class="silent-link">{{ include.pp.description }}</p>
			{% endif %}
		</div>
	</a>
</div>
