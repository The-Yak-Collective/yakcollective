{% comment %}
	Project page boxes display page information for projects that have
	one or more sub-pages. Each sub-page MUST have a `title` and either
	a `original_link` (for pages pointing offsite, like member writings)
	of `permalink` (for on-site pages) attribute, and then can contain
	any combination of the following attributes (including none at all):
	`hero_image`, `author`, `date`, and `description`. For best results,
	all sub-pages associated with a given project (with `display: true`)
	should have the same set of attributes defined.

	This include expects a single parameter:

		`pp`
		An object containing the relevant project page information.
{% endcomment %}

<div id="{{ include.pp.name }}" class="project-page-box-container dib mt4 mt5-l">
	{% if include.pp.date <= site.time or site.future == true %}<a href="{% if include.pp.original_link %}{{ include.pp.original_link }}{% else %}{{ include.pp.permalink }}{% endif %}"{% else %}<div{% endif %} class="project-page-box ba mh3 {% if include.pp.date > site.time and site.future != true %}o-30 {% endif %}relative">

		{% comment %}
			Hero image. Displayed portrait-ish, if present.

			We look up the background color from the associated project.
		{% endcomment %}
		{% assign project_data = site.projects | where: "name", include.pp.project | first %}
		<div class="hero bb" style="background: rgb({{ project_data.accent_color }}){% if include.pp.hero_image %} url('{{ include.pp.hero_image }}') {{ include.pp.hero_attach_vertical | default: "center" }} {{ include.pp.hero_attach_horizontal | default: "center" }}{% endif %}; background-size: cover;"></div>

		<div class="page-info mh4 mt1 mb3">
			<h2 class="pseudo-link">{{ include.pp.title }}</h2>

			{% comment %}
				Project page date.
			{% endcomment %}
			{% if include.pp.date %}
				<time class="f6 ttu tracked-tight">
					{{ include.pp.date | date_to_long_string: "ordinal", "US" }}
				</time>
			{% endif %}

			{% comment %}
				Project page author. Since the `member-list.html`
				include expects an array but `include.pp.author` is a
				string, we need to use `split` (on a character not
				present in `include.pp.author`) to turn it into a
				single-element array.
			{% endcomment %}
			{% if include.pp.author %}
				{% assign author = include.pp.author | split: " " %}
				<p class="project-page-author f6 ttu tracked-tight">{% include member-list.html member_list=author link_members=false %}</p>
			{% endif %}

			{% comment %}
				Project page description.
			{% endcomment %}
			{% if include.pp.description %}
				<p class="silent-link">{{ include.pp.description }}</p>
			{% endif %}
		</div>
	</{% if include.pp.date <= site.time or site.future == true %}a{% else %}div{% endif %}>
</div>
