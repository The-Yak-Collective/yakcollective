---
layout: page
---

{% comment %}
	Template for individual member pages; inherits from the "page"
	template. Applied to data files from the `members` category.
{% endcomment %}

<h1>{{ page.title }}</h1>

{% comment %}
	Generate the `member_id`. We'll need it later.
{% endcomment %}
{% assign member_id = page.url | replace: "/", " " | strip | split: " " | last %}

{% comment %}
	Pull in the member card (which functions as an information box
	here, rather than a link).
{% endcomment %}
{% include widget-member-card.html standalone=true member=page %}

{{ content }}

{% comment %}
	Generate a list of projects that the current member (1) was a lead
	on or (2) was a collaborator on.

	We begin by creating two arrays to hold these lists. Liquid lacks a
	way to natively create empty arrays, so we `split` an empty string
	instead. ¯\_(ツ)_/¯

	Then, we loop through the `projects` array created above. So long as
	the	project is not in the future, we check to see if the current
	member is a lead editor or a collaborator and add them to the
	appropriate array (`projects_lead` or `projects_collaborated`).

	Adapted from: https://stackoverflow.com/a/42727933
{% endcomment %}
{% assign projects_lead = "" | split: "" %}
{% assign projects_collaborated = "" | split: "" %}
{% assign site_epoch = site.time | date: "%s" | plus: 0 %}
{% for the_page in site.pages %}
	{% if the_page.layout == "page" %}
		{% assign path_array = the_page.url | replace: "/", " " | strip | split: " " %}
		{% if path_array[0] == "projects" and path_array.size == 2 %}
			{% assign project_epoch = the_page.date | date: "%s" | plus: 0 %}
			{% if project_epoch < site_epoch or site.future == true %}
				{% if the_page.lead_editors contains member_id %}
					{% assign projects_lead = projects_lead | push: the_page %}
				{% elsif the_page.collaborators contains member_id %}
					{% assign projects_collaborated = projects_collaborated | push: the_page %}
				{% endif %}
			{% endif %}
		{% endif %}
	{% endif %}
{% endfor %}
{% assign projects_lead = projects_lead | sort: "date" | reverse %}
{% assign projects_collaborated = projects_collaborated | sort: "date" | reverse %}

{% comment %}
	Output the `projects_lead` and `projects_collaborated` arrays.
{% endcomment %}
{% if projects_lead.size > 0 %}
	<h2 id="project-lead">Project Lead On</h2>
	{% for project in projects_lead reversed %}
		{% include widget-project-box.html project=project %}
	{% endfor %}
{% endif %}
{% if projects_collaborated.size > 0 %}
	<h2 id="collaborator">Collaborated On</h2>
	{% for project in projects_collaborated reversed %}
		{% include widget-project-box.html project=project %}
	{% endfor %}
{% endif %}

{% comment %}
	Include any writings for the current member.

	Note that, since the post list widget only outputs Markdown, we
	can't include it directly. Instead, we capture its output and then
	transform it into HTML using `markdownify`.
{% endcomment %}
{% assign num_writings = site.categories["writings"] | where: "author", member_id | size %}
{% if num_writings > 0 %}
	<h2 id="writings">Writings</h2>
	{% capture member_writings %}{% include widget-post-list.html init_header_level=3 show_author=false author=member_id category="writings" %}{% endcapture %}
	{{ member_writings | markdownify }}
{% endif %}
