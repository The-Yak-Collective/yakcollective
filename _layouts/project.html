---
layout: page
---

{% comment %}
	Layout for project pages (data files from `_projects`).

	The full-width hero banner at the top of the project page requires a
	more complex layout than the `minimal` wrapper allows, so we pull in
	`default` as our base instead.
{% endcomment %}

<article class="yak-project">
	<header class="yak-project-header hero">
		<div class="w-90 mw8 center">
			<div class="cf ph0 pv5-l pv4">
				<aside class="fn fl-l w-30-l ph4-l pb2 pb0-l">
					<div class="project-type f5 lh-title fw9 mb3 mt0 pt3 bt bw2 sans-serif ttu">{{ page.type }}</div>

					{% comment %}
						Project date and sequence count (if applicable).
					{% endcomment %}
					<time class="db f6 ttu mb3 tracked-tight">
						{{ page.date | date_to_long_string: "ordinal", "US" }} UTC
						{% if page.sequence %}
							<br>{% include sequence.html current_date=page.date sequence_id=page.sequence %}
						{% endif %}
					</time>

					{% comment %}
						Project lead editor list.
					{% endcomment %}
					<details class="f6 mb3 lead-editors" open>
						<summary class="ttu lh-title">Lead editors</summary>
						<p>{% include member-list.html member_list=page.lead_editors link_members=true %}</p>
					</details>

					{% comment %}
						Project collaborator list.
					{% endcomment %}
					<details class="f6 mb3 collaborators" open>
						<summary class="ttu lh-title">Collaborators</summary>
						<p>{% include member-list.html member_list=page.collaborators link_members=true %}</p>
					</details>
				</aside>

			{% comment %}
				Main hero banner content: The project title, tagline,
				and above-the-fold summary.
			{% endcomment %}
			<div class="fn fl-l w-70-l ph4-l">
					<h1 class="ma0 pa0 fw8 f1">{{ page.title }}</h1>
					<div class="subhead pt3 pb1 fw4 f3">{{ page.tagline }}</div>
					<div class="f5 lh-copy mb3">{{ page.summary | markdownify }}</div>
				</div>
			</div>
		</div>
	</header>

	{% comment %}
		Include project page boxes for all *displayed* pages associated
		with this project. Do not display this section at all if no such
		pages exist.

		Note that sorting on the `date` attribute only works if the
		`date` attribute exists, which it doesn't always. Hence why (1)
		we wait to sort until after testing for the size of
		`project_pages`, and (2) we pull the first element of
		`project_pages` to check if `date` exists there before sorting,
		on the assumption that all elements of `project_pages` have a
		consistent set of attributes (after filtering).

		We *don't* use a reverse sort here (unlike most of Jekyll) in
		order to better support ghosted "coming soon" page cards. If
		dates aren't present, we sort in alphabetical order by page
		slug.
	{% endcomment %}
	{% assign project_pages = site.project_pages | where: "project", page.name | where: "display", true %}
	{% if project_pages.size > 0 %}
		{% assign test_pp = project_pages[1] %}
		{% if test_pp.date %}
			{% assign sorted_project_pages = project_pages | sort: "date" %}
		{% else %}
			{% assign sorted_project_pages = project_pages | sort: "name" %}
		{% endif %}
		<section class="project-pages ph2 w-100 ph0-l w-90-l mw9 center">
			{% for pp in sorted_project_pages %}
				{% include widget-project-page-box.html pp=pp %}
			{% endfor %}
		</section>
	{% endif %}

	{% comment %}
		Project page content.
	{% endcomment %}
	<section class="container mw7 cf pt1 pb5 f4-l center w-90 lh-copy">{{ content }}</section>
</article>
