---
title: 'TryHackMe: Complete Beginner'
date: 2021-10-29 12:00:00.000000000 Z
layout: post-external
original_link: https://cardboard-iguana.com/log/2021-10-29-tryhackme-complete-beginner.html
author: 100007
---

<h1 id="tryhackme-complete-beginner">TryHackMe: Complete Beginner</h1>
<p><strong>author:</strong> Nathan Acks<br />
<strong>date:</strong> 2021-10-29</p>
<h1 id="common-linux-privsec">Common Linux Privsec</h1>
<h2 id="direction-of-privilege-escalation">Direction of Privilege Escalation</h2>
<p>Definitions:</p>
<ul>
<li>HORIZONTAL PRIVILEGE ESCALATION is obtaining access to another user account with the same(ish) privileges as the compromised account.</li>
<li>VERTICAL PRIVILEGE ESCALATION is obtaining access to another user account with <em>higher</em> privileges than the compromised account.</li>
</ul>
<p>In general, vertical escalation involves obtaining root/SYSTEM access.</p>
<h2 id="enumeration">Enumeration</h2>
<p>TryHackMe is going to focus on the use of the LinEnum script. Direct download via:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-O</span> https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh
</code></pre></div></div>
<ul>
<li><a href="https://github.com/rebootuser/LinEnum/blob/master/LinEnum.sh">LinEnum.sh</a></li>
</ul>
<h2 id="abusing-suidguid-files">Abusing SUID/GUID Files</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Find SUID/SGID binaries</span>
<span class="c">#</span>
find / <span class="nt">-type</span> f <span class="nt">-perm</span> <span class="nt">-u</span><span class="o">=</span>s
<span class="c">#</span>
<span class="c"># ...or...</span>
<span class="c">#</span>
find / <span class="nt">-type</span> f <span class="nt">-perm</span> <span class="nt">-4000</span>
</code></pre></div></div>
<p>Recall that leading a permission specified with <code class="language-plaintext highlighter-rouge">-</code> in <code class="language-plaintext highlighter-rouge">find</code> requires that <em>all</em> of the specified permission bits be set (but is agnostic as to the presence/absence of additional permissions); for numeric permissions 0 effectively acts as a wildcard.</p>
<h2 id="exploiting-writeable-etcpasswd">Exploiting Writeable /etc/passwd</h2>
<p>Strangely, it turns out that the <code class="language-plaintext highlighter-rouge">x</code> in the password field for /etc/password isn’t just anachronistic - it still <em>literally</em> means “look in /etc/shadow”. If a password is present in that field instead… Well, the login process (at least on most Linux systems) will still use that!</p>
<p>Compliant password hashes can be created with the <code class="language-plaintext highlighter-rouge">openssl passwd</code> command. For example, to create an MD5 hashed password:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl passwd <span class="nt">-1</span> <span class="nt">-salt</span> <span class="nv">$SALT</span> <span class="nv">$PASSWORD</span>
</code></pre></div></div>
<p>It’s also possible to have <em>multiple</em> users with the same UID and GID in /etc/passwd (wut?). So this is a way of “cloning” the root account.</p>
<h2 id="escaping-the-vi-editor">Escaping the Vi Editor</h2>
<p>The <code class="language-plaintext highlighter-rouge">sudo -l</code> command will helpfully tell us what we can run as the superuser without a password.</p>
<p><a href="https://gtfobins.github.io/">A compendium of binary escapes: GTFOBins.</a></p>
<h2 id="expanding-your-knowledge">Expanding Your Knowledge</h2>
<p>Linux privilege escalation checklists:</p>
<ul>
<li><a href="https://github.com/netbiosX/Checklists/blob/master/Linux-Privilege-Escalation.md">Linux Privilege Escalation</a></li>
<li><a href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md">PayloadsAllTheThings: Linux - Privilege Escalation</a></li>
<li><a href="https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_-_linux.html">Total OSCP Guide: Privilege Escalation</a></li>
<li><a href="https://payatu.com/guide-linux-privilege-escalation">A Guide to Linux Privilege Escalation</a></li>
</ul>